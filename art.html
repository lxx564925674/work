<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="X-UA-Compatible" content="ie=edge" />
	<link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
	
	<link rel="stylesheet" type="text/css" href="../css/public.css"/>
	<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>
	<link rel="stylesheet" type="text/css" href="../css/art.css"/>
	<title>Document</title>
</head>
<body>
	<div id="header" class='text-center'>
		<div class="container nav nav-pills" >
			<div class="col-md-3">
				<h3>李晓翔的博客</h3>
			</div>
			<div class="col-md-1"><a href="./index.html">首页</a></div>
			<div class="col-md-1"><a href="./about.html">关于我</a></div>
			<div class="col-md-1"><a href="./pic.html">图片锦集</a></div>
			<div class="col-md-1"><a href="./life.html">慢生活</a></div>
			<div class="col-md-1"><a href="./study.html">学无止境</a></div>
			<div class="col-md-1"><a href="./time.html">时间轴</a></div>
			<div class="col-md-1"><a href="./commen.html">留言</a></div>
			<div class="col-md-1">
				<span class="glyphicon glyphicon-search" aria-hidden="true"></span>
			</div>
		</div>
	</div>
	<div class="container">
		
		<!---------------------左侧部分-------------------------->
		<div class="col-md-8" id='v1'>
			


				
				
			<!---------------------站长推荐部分-------------------------->

			
			<div class="art_content" style="overflow: hidden;background-color: #FFF;">
				<div class="content" >
					<h1>{{arr[1].title}}</h1>
					<p>作者：杨青 <span>{{arr[1].cat_name}}</span> <span>{{time(arr[1].pubtime)}}</span> <span>{{arr[1].read_num}}</span>人已阅读</p>
					<div class="introduction"><h4>简介：{{arr[1].introduction}}</h4></div>
					
					<div id='content'>
						
					</div>
					
					<div class='goodNumber' @click="flag && good()"   style="width: 160px;border-radius: 8px;margin: auto;background-color: #E2523A;color: #fff;
													display: block;text-align: center;line-height: 45px;">很赞哦！（{{arr[1].good_num}}）</div>
				
				
				
					<div>
						<p>上一篇：<a v-bind:href="artHref+'?id='+arr[0].artid" >{{arr[0].title}}</a></p>
						<p v-if='arr[2]'>下一篇：<a v-bind:href="artHref+'?id='+arr[2].artid" >{{arr[2].title}}</a></p>
						<p v-else>下一篇：{{arr[1].title}}</p>
					</div>
				</div>
				
				
				
				
				
				<div class="comment" >
					<h4 style="font-weight: bold;border-bottom: 2px solid #000;line-height:50px;margin-top:100px;">文章评论</h4>
					<div class="commentList">
						<ul class="clearfix">
							<li class="clearfix" style="padding:20px 0;border-bottom:1px solid #aaa;" v-for='(item,index) of arr2'>
								<div class="pull-left" style="width: 120px;">
									<img v-bind:src="imgSrc[index]" style="border-radius: 50%;" height="80px" width="80px" />
								</div>
								<div class="pull-left">
									<p>{{item.comment_name}}</p>
									<p>{{item.comment_content}}</p>
								</div>
								<div class="pull-right" style="width:120px;line-height:30px;">{{time(item.comment_time)}}</div>
							</li>
							
						</ul>
						
						<div class="speak">
							<h4 style="color: #aaa;">来说两句吧..</h4>
							<p><span>用户名：</span><input type="text" id='comment_username'/></p>
							<p><span>验证码：</span><input type="text" id="comment_code" value="" /><img v-bind:src="verifyPath" width="150" height="50" style="margin-left: 20px;" @click="vertify"  alt="" /></p>
							<p>
								<textarea id='comment_content' style="width: 100%;" rows="5" cols="100"></textarea>
								<button style="border-radius:8px;width: 100px;height: 50px;background-color: #000000;color: #fff;" class="pull-right" onclick="comment()">提交</button>
							</p>
						</div>
					</div>
				</div>
				
				
			
				
				</div>
			
			
			<!---------------------分页部分-------------------------->
			
		</div>
		
		
		<!---------------------右侧部分-------------------------->
		<div class="col-md-4" id='v2'>
			
				<!---------------------标签栏部分-------------------------->
			<div class="tag" v-for="(item,index) of arr.slice(0,2)">
				<a v-bind:href="artHref+'?id='+arr[0].artid" >
					<img v-bind:src="item.art_img" width="100%" height="100%" />
					<span class="pos-a"style="width:75px">{{item.cat_name}}</span>
					<p class="pos-a">{{item.title}}</p>
				</a>
			</div>
			
			
			
			<!---------------------博主信息-------------------------->
			<div class="panel panel-default">
				<div class="panel-heading">
					博主介绍
				</div>
				<div class="panel-body blog-panel">
					
					<p>
						<img src="../images/8.jpg" width="30%" height=""  hspace="5" vspace="5"/>
						<strong>李晓翔</strong>
						，一个90后草根男站长！一直潜心研究web前端技术，一边学习一边积累经验。文字环绕，文字环绕，文字环绕，文字环绕，文字环绕，文字环绕，文字环绕，文字环绕，
					</p>
				</div>
			</div>
			
			
			<!---------------------固定部分-------------------------->
			<div id='willFiexd'>
				<!---------------------图文精选-------------------------->
				<div class="panel panel-default pic-panel">
					<div class="panel-heading">
						图文精选
					</div>
					
					<div class="panel-body">
						<img src="../images/2.jpg" alt="" class="pull-left" width="95" height="88px"/>
						<img src="../images/1.jpg" alt="" class="pull-left" width="95" height="88px"/>
						<img src="../images/4.jpg" alt="" class="pull-left" width="95" height="88px"/>
						<img src="../images/5.jpg" alt="" class="pull-left" width="95" height="88px"/>
						<img src="../images/7.jpg" alt="" class="pull-left" width="95" height="88px"/>
						<img src="../images/8.jpg" alt="" class="pull-left" width="95" height="88px"/>
					</div>
				</div>
				
				
				<!---------------------排行-------------------------->
				<div class="panel panel-default pic-panel" id='pic-panel'>
					<div class="panel-heading" id='panel-heading'>
						<span class="panel-heading-left">
							<a id='newArt'  @click="fn1">最新文章</a>
						</span>
						<span>
							<a id='clickArt'  @click="fn2">点击排行</a>
						</span>
					</div>
					
					<div class="panel-body " id='panelBody1' v-show="content">
						<ul style='padding-left:50px;' >
							<li v-for="(item,index) of arr.slice(0,10)"><a v-bind:href="artHref+'?id='+arr[0].artid" >{{item.title}}</a></li>
						</ul>
					</div>
					<div class="panel-body" id='panelBody2' v-show="!content">
						<ul style='padding-left:50px;'>
							<li>个人博客模板《show time》蓝色版</li>
							<li>我是怎么认识自己的</li>
							<li>帝国cms列表页调用关键字tag标签</li>
							<li>个人博客模板《show time》蓝色版</li>
						</ul>
					</div>
				</div>
				
				<!---------------------友情链接-------------------------->
				<div class="panel panel-default ">
					<div class="panel-heading">
						友情链接
					</div>
					
					<div class="panel-body">
						李晓翔个人博客
					</div>
				</div>
				<!---------------------二维码-------------------------->
				<div class="panel panel-default ">
					<div class="panel-heading" >
						关注我，么么哒
					</div>
					
					<div class="panel-body" style="text-align: center;">
						<img src="../images/timg.gif" alt="" width="180px" height="auto"/>
					</div>
				</div>
				
			</div>
			
		</div>
	</div>

<!---->


	<!---->
	<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.2/js/swiper.min.js"></script>
	<script src="https://cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.js"></script>
	<script src="../js/index.js"></script>
	<script src="../js/fn.js"></script>
	<script src="../js/public.js"></script>
	<script>
	
		
		var Top=willFiexd.offsetTop;
		window.onscroll=function(){
			headerScroll();
		}
		
		if(get_get()){
			var artid=get_get().split('=')[1];
		}else{
			window.location.href='http://www.work.com/page/index.html';
		}
		
		
	//--------------------vue1----------------------		 
		function v1(Data){
			const v1 =new Vue({
				el:'#v1',
				data:{
					content:'',
					arr:Data,
					flag:true,
					artHref:'http://www.work.com/art.html',
					verifyPath:verifyPath,
					arr2:Data3,
					imgSrc:['images/7.jpg','images/6','images/5','images/4','images/3','images/2']
				},
				methods:{
					time:function(timestamp) {
				        return new Date( parseInt(timestamp) ).toLocaleString().replace(/:\d{1,2}$/,' '); 
				  },
				  good:function(){
				  	ajax({
					    url: "php/good.php",  
					    type : "POST", 
					    async : true,  
					    data : {
					    		artid:artid
					    },
					    success : function(data){   //返回接受信息
							if(data){
								Data[1].good_num++;
							}
					    }
					});
					this.flag=false;
				  },
				  vertify:function(){
				  	 if(vertify()){
				  	 	console.log(this.verifyPath);
				  	 	this.verifyPath='php/verify/test.png?'+Math.random(); 
				  	 	console.log(this.verifyPath);
				  	 }
				  	 console.log(this.verifyPath);
				  }
					
				}
					
			})
		}
	
		var Data=[];
		var Data2=[];
		ajax({
			    url: "php/art.php",  
			    type : "POST", 
			    async : true,  
			    data : {
			    		artid:artid
			    },
			    success : function(data){   //返回接受信息
					data=JSON.parse(data);
					for(var i=0;i<data.length;i++){
							Data.push(data[i]);
					}
					content.innerHTML=Data[1].content;
					v1(Data);
					
			    }
			});
			
			
			
	//--------------------vue2---------------------		 		
		
		function v2(Data){
			const v2 =new Vue({
				el:'#v2',
				data:{
					content:true,
					arr:Data,
					artHref:'http://www.work.com/art.html'
				},
				methods:{
					time:function(timestamp) {
				        return new Date( parseInt(timestamp) ).toLocaleString().replace(/:\d{1,2}$/,' '); 
				 	 },
				 	fn1:function(){
				 		
				 		this.content=true;
				 	},
					fn2:function(){
				 		this.content=false;
				 	}
				 }
				
					
			})
		}
		ajax({
			    url : "php/index.php",  
			    type : "POST", 
			    async : true,  
			    data : {   
			    		sort:'art.read_num'
			    },
			    success : function(data){   //返回接受信息
					data=JSON.parse(data);
					for(var i=0;i<data.length;i++){
							Data2.push(data[i]);
					}
					v2(Data2);
			    }
			});
		
		//--------------------vue3---------------------		
		
		var Data3=[];
		ajax({
			    url : "php/commentSelect.php",  
			    type : "POST", 
			    async : true,  
			    data : {   
			    		artid:artid
			    },
			    success : function(data){   //返回接受信息
					data=JSON.parse(data);
					for(var i=0;i<data.length;i++){
							Data3.push(data[i]);
					}
				
			    }
		});
		
		//--------------------comment---------------------		 	
		function vertify(){
			
			ajax({
			    url : "php/verify.php",  
			    type : "POST", 
			    async : true,  
			    data : {   
			    		data:1
			    },
			    success : function(data){   //返回接受信息
					verifyPath=data;
					console.log($.cookie('code'));
					
			    }
			});
			return verifyPath;
		}
		var verifyPath='';
		vertify();
		
		
		//------------------------------------------
		
		function comment(){
			var username=comment_username.value;
			var content =comment_content.value;
			var code =comment_code.value;
			if($.cookie('code')==code){
				ajax({
				    url : "php/comment.php",  
				    type : "POST", 
				    async : true,  
				    data : {   
				    		type:'ssii',
				    		comment_name:username,
				    		comment_content:content,
				    		art_id:artid,
				    		comment_time:Date.parse(new Date())
				    },
				    success : function(data){   //返回接受信息
				    	alert('评论成功');
						window.location.reload()
						
						
				    }
				});
			}else{
				alert('请确认信息是否正确')
				return false;
			}
		}
	</script>
</body>
</html>